The _EMF Builder Generator_ project helps with generating Java builders (http://en.wikipedia.org/wiki/Builder_pattern) for EMF metamodels. The generated Java classes follow a fluent API. Builders are very useful to create test data, but can also be used to construct object graphs in production code.

Consider a metamodel for companies, with departments and employees. Using the generated EMF API, you can write:

<pre>
<code class="java">
Company company = CompanyFactory.eINSTANCE.createCompany();
company.setName("MyCompany");

Department department = CompanyFactory.eINSTANCE.createDepartment();
department.setNumber(1);

Employee alice = CompanyFactory.eINSTANCE.createEmployee();
alice.setName("Alice");

Employee bob = CompanyFactory.eINSTANCE.createEmployee();
bob.setName("Bob");

department.getEmployees().add(alice);
department.getEmployees().add(bob);
company.getDepartment().add(department);
</code>
</pre>

Using this project, you can generate a Java API to create the same model like this:


<pre>
<code class="java">
Company company = newCompanyBuilder()
  .withName("MyCompany")
  .withDepartment(
    newDepartmentBuilder()
      .withNumber(1)
      .withEmployees(
        newEmployeeBuilder()
          .withName("Alice")
      )
      .withEmployees(
        newEmployeeBuilder()
          .withName("Bob"))
      )
  .build();
</code>
</pre>

You can find the example project in the repository (source:org.haschemi.utils.emfbuildergen.company).

In another example (source:org.haschemi.utils.emfbuildergen.ecore), we generated the builder API for the Ecore metamodel itself, wo we are able to write the company metamodel of the examples above like this:

<pre>
<code class="java">

final EcorePackage ecore = EcorePackage.eINSTANCE;      
final EClass employeeClass = newEClassBuilder()
  .withName("Employee")
  .withEStructuralFeatures(
    newEAttributeBuilder()
      .withName("name")
      .withEType(ecore.getEString())
    .build()
  )
.build();    
    
final EClass departmentClass = newEClassBuilder()
  .withName("Department")
  .withEStructuralFeatures(
    newEAttributeBuilder()
      .withName("number")
      .withEType(ecore.getEInt())
    .build()
  )
  .withEStructuralFeatures(
    newEReferenceBuilder()
      .withName("employees")
      .withEType(employeeClass)
      .withUpperBound(ETypedElement.UNBOUNDED_MULTIPLICITY)
      .withContainment(true)
    .build()
  )
.build();

final EClass companyClass = newEClassBuilder()
  .withName("Company")
  .withEStructuralFeatures(
    newEAttributeBuilder()
      .withName("name")
      .withEType(ecore.getEString())
    .build()
  )
  .withEStructuralFeatures(
    newEReferenceBuilder()
      .withName("department")
      .withEType(departmentClass)
      .withUpperBound(ETypedElement.UNBOUNDED_MULTIPLICITY)
      .withContainment(true)
    .build()
  )
.build();
    
final EPackage ePackage = newEPackageBuilder()
  .withName("company")
  .withNsPrefix("company")
  .withNsURI("http:///com.example.company.ecore")
  .withEClassifiers(employeeClass)
  .withEClassifiers(companyClass)
  .withEClassifiers(departmentClass)
.build();
</code>
</pre>

